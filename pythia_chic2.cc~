// Stdlib header file for input and output.
#include <iostream>

// Header file to access Pythia 8 program elements.
// #include "Pythia8/Pythia.h"
#include "Pythia8/Pythia.h"

// ROOT, for histogramming.
#include "TH1.h"
#include "TH2.h"

// ROOT, for interactive graphics.
#include "TVirtualPad.h"
#include "TApplication.h"

// ROOT, to set random seed (Pythia random seed based on tume does not work!)
#include "TRandom.h"
#include "TMath.h"

// ROOT, for saving file.
#include "TFile.h"

//#include "TParticle.h"

using namespace Pythia8;


/* принцип декомпозиции:

   Необходимо "разбить" программу на как можно более простые составляющие части.
   Реализовать каждую из частей в виде отдельного класса/функции... и вызывать в теле 
   основной программы

   Пример: Инициализация генератора Pythia будет происходить при помощи функции 
   "Init_pythia_generator". Сама функция реализована в отдельном файле :
   "Init_pythia_generator.cc" и принимает на вход указатель на объект класса генертора.
 
*/

// инцииализация функции из "стороннего" файла проекта
void Init_pythia_generator(Pythia*);

int main(int argc, char* argv[]) {

  // read input parameters
  printf("argc = %d, argv[0] = %s\n",argc,argv[0]);
  if (argc != 2) {
    printf("Usage: %s <nEvents>\n",argv[0]);
    printf("       <nEvents>=0 is the number of events to generate.\n");
    return 1;
  }
  int nEvents = atoi(argv[1]);
  cout << "nEvents = " << nEvents << endl;

  // Create the ROOT application environment. 
  TApplication theApp("hist", &argc, argv);



  /*Создание объекта и указателя на объект класса Pythia :
  
  объект:       Pythia8::Pythia pythia_obj
  указатель:    Pythia8::Pythia* pythia_ptr
  */

  cout << "\n\n Try to init generator:\n\n";

  Pythia pythia;

  Init_pythia_generator(&(pythia));



   int nEvent2Print = 1;

  // Begin event loop. Generate event

  int iEvent2Print = 0;
  for (int iEvent = 0; iEvent < nEvents; ++iEvent) {
    if (!pythia.next()) continue;

    // print first nEvent2Print events
    if (iEvent2Print < nEvent2Print) pythia.event.list();
    iEvent2Print++;
    

    // Loop over all particles in the generated event
    double px,py,pz,p0;
    
    for (int i = 0; i < pythia.event.size(); ++i) {
      
    } // End of particle loop
    cout <<  pythia.event.size() << "\n";
  } // End of event loop




  cout << "\n\n Program was fineshed it's work correctly!\n\n";
 

  return 0;
}
